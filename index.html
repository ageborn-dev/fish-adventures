<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />
    <title>Fish Adventure</title>
    <link rel="stylesheet" href="/css/style.css" />
  </head>
  <body role="application" aria-label="Fish Adventure Game">
    <a href="#game-container" class="skip-link">Skip to game</a>
    <svg id="water-filters">
      <defs>
        <filter id="turbulence">
          <feturbulence
            type="fractalNoise"
            baseFrequency="0.01 0.005"
            numOctaves="3"
            result="turbulence"
            seed="1"
          >
            <animate
              attributeName="baseFrequency"
              dur="30s"
              values="0.01 0.005;0.007 0.004;0.01 0.005"
              repeatCount="indefinite"
            />
          </feturbulence>
          <fedisplacementmap in="SourceGraphic" in2="turbulence" scale="10" />
        </filter>
      </defs>
    </svg>
    <div id="loading-screen" role="dialog" aria-labelledby="loading-title" aria-live="polite">
      <h1 id="loading-title">Fish Adventure</h1>
      <div class="loading-container">
        <div id="loading-text" aria-live="polite">Loading... 0%</div>
        <div class="loading-bar" role="progressbar" aria-valuemin="0" aria-valuemax="100" aria-valuenow="0" aria-label="Game loading progress">
          <div id="loading-progress" class="loading-progress"></div>
        </div>
        <div class="loading-info">
          <p>üê† Preparing underwater adventure...</p>
          <p>üåä Loading ocean environments...</p>
          <p>üéµ Tuning underwater sounds...</p>
        </div>
      </div>
    </div>

    <div id="start-screen" style="display: none;" role="dialog" aria-labelledby="start-title">
      <h1 id="start-title">Fish Adventure</h1>
      <div class="instructions" role="group" aria-labelledby="instructions-title">
        <h2 id="instructions-title" class="sr-only">Game Instructions</h2>
        <p class="desktop-instruction" role="text">üéÆ Use arrow keys to move the fish</p>
        <p class="mobile-instruction" role="text">üéÆ Use the virtual joystick to move</p>
        <p class="desktop-instruction" role="text">‚è∏Ô∏è Press P to pause</p>
        <p class="mobile-instruction" role="text">‚è∏Ô∏è Tap the pause button to pause</p>
        <p role="text">‚≠ê Collect stars for power-ups</p>
        <p class="desktop-instruction" role="text">üéØ Press 1-2-3 for difficulty levels</p>
        <p class="mobile-instruction" role="text">üéØ Tap the settings button for difficulty</p>
        <p role="text">‚ùå Avoid obstacles and survive!</p>
      </div>
      <div class="game-buttons">
        <button id="continue-button" onclick="continueGame()" style="display: none;" aria-describedby="instructions-title">Continue Game</button>
        <button id="start-button" onclick="startGame()" aria-describedby="instructions-title">New Game</button>
      </div>
      <div class="additional-options">
        <button id="settings-button" onclick="showSettings()" class="secondary-button">Settings</button>
      </div>
    </div>

    <div id="pause-screen" role="dialog" aria-labelledby="pause-title" aria-live="assertive">
      <h2 id="pause-title">Game Paused</h2>
      <p>Press P to resume</p>
      <p class="sr-only">Game is currently paused. Press P key to continue playing.</p>
    </div>

    <!-- Modern Game Frame -->
    <div id="game-frame" class="game-frame">
      <!-- Top UI Panel -->
      <div class="ui-panel ui-top" role="banner">
        <div class="ui-section score-section">
          <div class="ui-item">
            <span class="ui-icon">‚≠ê</span>
            <div class="ui-content">
              <div class="ui-label">Score</div>
              <div class="ui-value" id="current-score">0</div>
            </div>
          </div>
          <div class="ui-item">
            <span class="ui-icon">üèÜ</span>
            <div class="ui-content">
              <div class="ui-label">High Score</div>
              <div class="ui-value" id="high-score-display">0</div>
            </div>
          </div>
        </div>

        <!-- Game Logo -->
        <div class="ui-section logo-section">
          <img src="/assets/images/logo/Fish Adventures Logo Text.png" alt="Fish Adventure" class="game-logo">
        </div>

        <div class="ui-section stage-section">
          <div class="ui-item">
            <span class="ui-icon">üåä</span>
            <div class="ui-content">
              <div class="ui-label">Stage</div>
              <div class="ui-value" id="current-stage-display">1</div>
            </div>
          </div>
          <!-- Mobile Lives Display (hidden on desktop) -->
          <div class="ui-item mobile-only">
            <span class="ui-icon">‚ù§Ô∏è</span>
            <div class="ui-content">
              <div class="ui-label">Lives</div>
              <div id="mobile-lives-container" class="mobile-lives-container">
                <span class="mobile-heart">‚ù§Ô∏è</span>
                <span class="mobile-heart">‚ù§Ô∏è</span>
                <span class="mobile-heart">‚ù§Ô∏è</span>
              </div>
            </div>
          </div>
        </div>
      </div>

      <!-- Right UI Panel -->
      <div class="ui-panel ui-right" role="complementary">
        <div class="ui-section lives-section">
          <div class="section-header">
            <div class="ui-label">Lives</div>
            <div id="lives-container" class="lives-container">
              <div class="life-heart filled"></div>
              <div class="life-heart filled"></div>
              <div class="life-heart filled"></div>
            </div>
          </div>
        </div>
        <div class="ui-section powerup-section">
          <div class="section-header">
            <div class="ui-label">Power-ups</div>
            <div id="powerup-display" class="powerup-display">
              <div class="powerup-slot empty" id="powerup-slot-1"></div>
              <div class="powerup-slot empty" id="powerup-slot-2"></div>
            </div>
          </div>
        </div>
      </div>

      <!-- Game Area -->
      <main id="game-container" role="main" aria-label="Game play area">
        <div id="fish" role="img" aria-label="Player fish, use arrow keys or joystick to move">
          <img src="/assets/images/icons/fish.gif" alt="Player controlled fish" />
        </div>

        <!-- Mobile Touch Controls -->
        <div id="mobile-controls" class="mobile-controls" role="group" aria-label="Mobile game controls">
          <div class="control-area">
            <div class="virtual-joystick" id="virtual-joystick" role="button" aria-label="Virtual joystick for fish movement" tabindex="0">
              <div class="joystick-base">
                <div class="joystick-handle" id="joystick-handle" aria-hidden="true"></div>
              </div>
            </div>
            <div class="control-buttons" role="group" aria-label="Game control buttons">
              <button class="control-btn pause-btn" id="mobile-pause" aria-label="Pause game">‚è∏Ô∏è</button>
              <button class="control-btn difficulty-btn" id="mobile-difficulty" aria-label="Change difficulty level">‚öôÔ∏è</button>
            </div>
          </div>
        </div>
      </main>

      <!-- Bottom UI Panel -->
      <div class="ui-panel ui-bottom" role="complementary">
        <div class="ui-section progress-section">
          <div class="ui-label">Stage Progress</div>
          <div class="progress-bar">
            <div class="progress-fill" id="stage-progress"></div>
          </div>
        </div>
        <div class="ui-section difficulty-section">
          <div class="ui-item">
            <span class="ui-icon">‚öôÔ∏è</span>
            <div class="ui-content">
              <div class="ui-label">Difficulty</div>
              <div class="ui-value" id="difficulty-display">Normal</div>
            </div>
          </div>
        </div>
      </div>
    </div>
    <div class="water-effect" aria-hidden="true"></div>
    <div id="score" role="status" aria-live="polite" aria-label="Current score and game statistics" style="display: none;">Score: 0</div>
    <div id="game-over" role="dialog" aria-live="assertive" aria-labelledby="game-over-title">
      <h2 id="game-over-title" class="sr-only">Game Over</h2>
      Game Over! Press R to Restart
    </div>

    <!-- Settings Modal -->
    <div id="settings-modal" class="settings-modal" style="display: none;">
      <div class="settings-backdrop" onclick="closeSettings()"></div>
      <div class="settings-window">
        <div class="settings-header">
          <h2>üéÆ Game Settings</h2>
          <button class="close-btn" onclick="closeSettings()" aria-label="Close settings">‚úï</button>
        </div>

        <div class="settings-content">
          <!-- Audio Settings -->
          <div class="settings-section">
            <h3>üîä Audio</h3>

            <div class="setting-row">
              <label for="sound-toggle">Sound Effects</label>
              <div class="toggle-switch">
                <input type="checkbox" id="sound-toggle" checked>
                <span class="slider"></span>
              </div>
            </div>

            <div class="setting-row">
              <label for="music-toggle">Background Music</label>
              <div class="toggle-switch">
                <input type="checkbox" id="music-toggle" checked>
                <span class="slider"></span>
              </div>
            </div>

            <div class="setting-row">
              <label for="volume-slider">Master Volume</label>
              <input type="range" id="volume-slider" min="0" max="100" value="70" class="volume-slider">
              <span class="volume-value">70%</span>
            </div>
          </div>

          <!-- Graphics Settings -->
          <div class="settings-section">
            <h3>üé® Graphics</h3>

            <div class="setting-row">
              <label>Graphics Quality</label>
              <div class="radio-group">
                <label class="radio-option">
                  <input type="radio" name="graphics" value="low">
                  <span class="radio-custom"></span>
                  Low
                </label>
                <label class="radio-option">
                  <input type="radio" name="graphics" value="medium">
                  <span class="radio-custom"></span>
                  Medium
                </label>
                <label class="radio-option">
                  <input type="radio" name="graphics" value="high" checked>
                  <span class="radio-custom"></span>
                  High
                </label>
              </div>
            </div>

            <div class="setting-row">
              <label for="particle-toggle">Particle Effects</label>
              <div class="toggle-switch">
                <input type="checkbox" id="particle-toggle" checked>
                <span class="slider"></span>
              </div>
            </div>
          </div>

          <!-- Gameplay Settings -->
          <div class="settings-section">
            <h3>‚ö° Gameplay</h3>

            <div class="setting-row">
              <label>Difficulty</label>
              <div class="radio-group">
                <label class="radio-option">
                  <input type="radio" name="difficulty" value="easy">
                  <span class="radio-custom"></span>
                  Easy
                </label>
                <label class="radio-option">
                  <input type="radio" name="difficulty" value="normal" checked>
                  <span class="radio-custom"></span>
                  Normal
                </label>
                <label class="radio-option">
                  <input type="radio" name="difficulty" value="hard">
                  <span class="radio-custom"></span>
                  Hard
                </label>
              </div>
            </div>

            <div class="setting-row">
              <label for="auto-save-toggle">Auto-Save Progress</label>
              <div class="toggle-switch">
                <input type="checkbox" id="auto-save-toggle" checked>
                <span class="slider"></span>
              </div>
            </div>
          </div>

          <!-- Accessibility Settings -->
          <div class="settings-section">
            <h3>‚ôø Accessibility</h3>

            <div class="setting-row">
              <label for="announcements-toggle">Screen Reader Announcements</label>
              <div class="toggle-switch">
                <input type="checkbox" id="announcements-toggle" checked>
                <span class="slider"></span>
              </div>
            </div>

            <div class="setting-row">
              <label for="reduced-motion-toggle">Reduce Motion</label>
              <div class="toggle-switch">
                <input type="checkbox" id="reduced-motion-toggle">
                <span class="slider"></span>
              </div>
            </div>
          </div>
        </div>

        <div class="settings-footer">
          <button class="btn-secondary" onclick="resetSettings()">Reset to Defaults</button>
          <button class="btn-primary" onclick="closeSettings()">Done</button>
        </div>
      </div>
    </div>

    <script type="module" src="/js/main.js"></script>
  </body>
</html>
